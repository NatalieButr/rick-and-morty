(this["webpackJsonprick-and-morti"]=this["webpackJsonprick-and-morti"]||[]).push([[0],{54:function(e,c,r){},55:function(e,c,r){},57:function(e,c,r){},58:function(e,c,r){},59:function(e,c,r){},60:function(e,c,r){},61:function(e,c,r){"use strict";r.r(c);var t=r(2),a=r(1),n=r.n(a),s=r(17),i=r.n(s),o=r(11),l=r(15),d=r(6),u=r(14),j=r.n(u),b=r(38),h=r(25),O=r(26),_=r(29),v=r(43),f=function(e){Object(O.a)(r,e);var c=Object(_.a)(r);function r(e){var t,a=e.code,n=e.message,s=e.status;return Object(h.a)(this,r),(t=c.call(this)).code=a,t.status=s,t.message=n,t}return r}(Object(v.a)(Error));function m(e){return p.apply(this,arguments)}function p(){return(p=Object(b.a)(j.a.mark((function e(c){var r,t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(c);case 2:return r=e.sent,e.next=5,r.json();case 5:if(t=e.sent,a=r.status,!(null===r||void 0===r?void 0:r.ok)){e.next=9;break}return e.abrupt("return",t);case 9:throw new f({status:a,code:a,message:t.error});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x="FETCH_CHARACTER_LIST",E="RECEIVE_CHARACTER_LIST_SUCCESS",C="RECEIVE_CHARACTER_LIST_ERROR",R="FETCH_MORE_CHARACTER_LIST",N="RECEIVE_MORE_CHARACTER_LIST_SUCCESS",y="FETCH_CHARACTER",g="RECEIVE_CHARACTER_SUCCESS",A="RECEIVE_CHARACTER_ERROR",L="HIDE_ERROR",I="SHOW_LOADER",k="HIDE_LOADER";var w="https://rickandmortyapi.com/api",T="Alive",S="Dead";r(54);function H(){return Object(t.jsx)("div",{className:"spinner",children:Object(t.jsx)("div",{className:"spinner__circle"})})}r(55);function D(){var e=Object(d.f)().id,c=Object(o.b)(),r=Object(o.c)((function(e){return{character:e.characters.character,isLoading:e.loader.isLoading}})),n=r.character,s=r.isLoading;return Object(a.useEffect)((function(){var r;c((r="".concat(w,"/character/").concat(e),{type:y,receiveData:g,receiveError:A,callAPI:function(){return m(r)}}))}),[e,c]),Object(t.jsxs)("div",{className:"character",children:[Object(t.jsxs)("div",{className:"character__panel",children:[Object(t.jsx)(l.b,{className:"character__link",to:"/",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"}),Object(t.jsx)("h2",{className:"character__title",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430"})]}),s?Object(t.jsx)(H,{}):n?Object(t.jsxs)("div",{className:"character__profile",children:[Object(t.jsx)("div",{className:"characterCard__imageWrapper",children:Object(t.jsx)("img",{className:"characterCard__image",alt:n.name,src:n.image})}),Object(t.jsxs)("div",{className:"characterCard__info",children:[Object(t.jsx)("div",{className:"characterCard__title",children:Object(t.jsx)("h3",{children:n.name})}),Object(t.jsxs)("div",{className:"characterCard__row",children:[Object(t.jsx)("span",{className:"characterCard__circle ".concat(n.status===T?"characterCard__circle_alive":""," ").concat(n.status===S?"characterCard__circle_dead":"")}),n.status," - ",n.species," - ",n.gender]}),Object(t.jsxs)("div",{className:"characterCard__location",children:[Object(t.jsx)("p",{children:"Last known location:"}),Object(t.jsx)("p",{children:n.location.name})]})]})]}):""]})}function P(){return Object(t.jsx)(D,{})}var V=r(41);r(57);function W(e){var c=e.item;return Object(t.jsx)("div",{className:"characterCard",children:Object(t.jsxs)(l.b,{to:"/characters/".concat(c.id),className:"characterCard__content",children:[Object(t.jsx)("div",{className:"characterCard__imageWrapper",children:Object(t.jsx)("img",{className:"characterCard__image",alt:c.name,src:c.image})}),Object(t.jsxs)("div",{className:"characterCard__info",children:[Object(t.jsx)("div",{className:"characterCard__title",children:Object(t.jsx)("h3",{children:c.name})}),Object(t.jsxs)("div",{className:"characterCard__row",children:[Object(t.jsx)("span",{className:"characterCard__circle ".concat(c.status===T?"characterCard__circle_alive":""," ").concat(c.status===S?"characterCard__circle_dead":"")}),c.status," - ",c.species]}),Object(t.jsxs)("div",{className:"characterCard__location",children:[Object(t.jsx)("p",{children:"Last known location:"}),Object(t.jsx)("p",{children:c.location.name})]})]})]})})}r(58);function F(){var e=Object(o.c)((function(e){return{characters:e.characters.characterList,info:e.characters.info,isLoading:e.loader.isLoading}})),c=e.characters,r=e.info,n=e.isLoading,s=Object(a.useState)(!1),i=Object(V.a)(s,2),l=i[0],d=i[1],u=Object(o.b)(),j=Object(a.useCallback)((function(e){var c;u((c=e,{type:x,receiveData:E,receiveError:C,callAPI:function(){return m(c)}}))}),[u]);Object(a.useEffect)((function(){var e;l&&!n&&(u((e=null===r||void 0===r?void 0:r.next,{type:R,receiveData:N,receiveError:"RECEIVE_MORE_CHARACTER_LIST_ERROR",callAPI:function(){return m(e)}})),d(!1))}),[u,j,r,l,n]),Object(a.useEffect)((function(){j("".concat(w,"/character"))}),[u,j]);var b=Object(a.useCallback)((function(e){null!==e&&new IntersectionObserver((function(e){e.forEach((function(e){1!==e.intersectionRatio||!(null===r||void 0===r?void 0:r.next)||l||n||d(!0)}))}),{threshold:1}).observe(e)}),[r,n,l]);return Object(t.jsxs)("div",{className:"characters",children:[c.map((function(e){return Object(t.jsx)(W,{item:e},e.id)})),n&&Object(t.jsx)("div",{className:"characters__loading",children:Object(t.jsx)(H,{})}),Object(t.jsx)("div",{ref:b,className:"characters__bottom"})]})}function M(){return Object(t.jsx)(F,{})}function U(){Object(a.useLayoutEffect)((function(){return document.body.setAttribute("modal-open","true"),function(){document.body.removeAttribute("modal-open")}}),[])}var J=r(39),B=function(e){Object(O.a)(r,e);var c=Object(_.a)(r);function r(){return Object(h.a)(this,r),c.apply(this,arguments)}return Object(J.a)(r,[{key:"render",value:function(){return i.a.createPortal(this.props.children,document.body)}}]),r}(n.a.Component);r(59);function K(e){var c=e.children,r=e.onClose;return U(),Object(t.jsxs)(B,{children:[Object(t.jsx)("div",{onKeyPress:r,role:"button",tabIndex:"0",className:"modal__backdrop",onClick:r}),c]})}function q(){var e=Object(o.c)((function(e){return{error:e.errors.error,isError:e.errors.isError}})),c=e.error,r=e.isError,a=Object(o.b)();return r?Object(t.jsx)(K,{onClose:function(){return a({type:L})},children:Object(t.jsx)("div",{className:"modal",children:Object(t.jsxs)("div",{className:"modal__error",children:[Object(t.jsxs)("div",{className:"modal__titleWrapper",children:[" \u041e\u0448\u0438\u0431\u043a\u0430 ",null===c||void 0===c?void 0:c.code,"!"]}),Object(t.jsx)("div",{className:"modal__content",children:null===c||void 0===c?void 0:c.message})]})})}):null}var z=function(){return Object(t.jsxs)("div",{className:"container",children:[Object(t.jsxs)(d.c,{children:[Object(t.jsx)(d.a,{exact:!0,path:"/",component:M}),Object(t.jsx)(d.a,{exact:!0,path:"/characters/:id",component:P})]}),Object(t.jsx)(q,{})]})},G=r(12),Q=r(40),X=r(42),Y=r(13),Z=function(){return{type:k}},$=j.a.mark(ce),ee=j.a.mark(re);function ce(e){var c,r,t,a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=e.receiveData,r=e.receiveError,t=e.callAPI,n.prev=1,n.next=4,Object(Y.b)({type:I});case 4:return n.next=6,Object(Y.a)(t);case 6:return a=n.sent,n.next=9,Object(Y.b)({type:c,payload:a});case 9:return n.next=11,Object(Y.b)(Z());case 11:n.next=19;break;case 13:return n.prev=13,n.t0=n.catch(1),n.next=17,Object(Y.b)({type:r,payload:n.t0});case 17:return n.next=19,Object(Y.b)(Z());case 19:case"end":return n.stop()}}),$,null,[[1,13]])}function re(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.c)(x,ce);case 2:return e.next=4,Object(Y.c)(R,ce);case 4:return e.next=6,Object(Y.c)(y,ce);case 6:case"end":return e.stop()}}),ee)}var te=r(35),ae=r(16),ne={characterList:[],character:null,info:null},se={error:null,isError:!1},ie={isLoading:!1},oe=Object(G.c)({characters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,c=arguments.length>1?arguments[1]:void 0;switch(c.type){case E:return Object(ae.a)(Object(ae.a)({},e),{},{characterList:c.payload.results,info:c.payload.info});case N:return Object(ae.a)(Object(ae.a)({},e),{},{characterList:[].concat(Object(te.a)(e.characterList),Object(te.a)(c.payload.results)),info:c.payload.info});case g:return Object(ae.a)(Object(ae.a)({},e),{},{character:c.payload});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,c=arguments.length>1?arguments[1]:void 0;switch(c.type){case A:case C:return{isError:!0,error:c.payload};case L:return se;default:return e}},loader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,c=arguments.length>1?arguments[1]:void 0;switch(c.type){case I:return{isLoading:!0};case k:return ie;default:return e}}}),le=Object(X.a)(),de=Object(G.e)(oe,Object(G.d)(Object(G.a)(Q.a,le)));le.run(re);r(60);var ue=Object(t.jsx)(o.a,{store:de,children:Object(t.jsx)(l.a,{children:Object(t.jsx)(z,{})})});Object(s.render)(ue,document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.59398567.chunk.js.map